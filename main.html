<!doctype html>
<html lang="th">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>‡∏™‡∏±‡πà‡∏á‡∏≠‡∏≤‡∏´‡∏≤‡∏£ (Demo) ‚Äî Single File</title>
<style>
  :root{
    --bg:#fafafa; --card:#fff; --text:#222; --muted:#666; --accent:#ff6b35;
  }
  /* [data-theme="dark"]{ --bg:#0f1720; --card:#111827; --text:#e6eef6; --muted:#9aa6b2; --accent:#fb923c; } */
  *{box-sizing:border-box}
  body{margin:0;font-family: "Helvetica Neue", Arial, sans-serif;background:var(--bg);color:var(--text);-webkit-font-smoothing:antialiased}
  header{display:flex;align-items:center;justify-content:space-between;padding:12px 16px;background:white;position:sticky;top:0;z-index:5}
  .brand{display:flex;align-items:center;gap:10px}
  .logo{width:44px;height:44px;border-radius:8px;background:var(--accent);display:flex;align-items:center;justify-content:center;color:#fff;font-weight:700}
  h1{font-size:16px;margin:0}
  .controls{display:flex;gap:8px;align-items:center}
  button.btn{background:var(--accent);color:white;border:0;padding:8px 12px;border-radius:8px;cursor:pointer;font-weight:600}
  button.ghost{background:transparent;border:1px solid rgba(0,0,0,0.08);padding:7px 10px;border-radius:8px}
  main{display:flex;gap:16px;padding:16px;max-width:1100px;margin:0 auto}
  .menu{flex:1;min-width:0}
  .cart{width:360px;max-width:40%;min-width:280px}
  .card{background:var(--card);border-radius:12px;padding:12px;box-shadow:0 4px 14px rgba(0,0,0,0.04);margin-bottom:12px}
  .menu-item{display:flex;gap:12px;align-items:center}
  .menu-item img{width:110px;height:90px;object-fit:cover;border-radius:10px;flex-shrink:0}
  .mi-body{flex:1}
  .mi-title{display:flex;justify-content:space-between;align-items:center}
  .mi-title h3{margin:0;font-size:16px}
  .mi-desc{margin:6px 0;color:var(--muted);font-size:13px}
  .price{font-weight:700}
  .add{padding:8px 10px;border-radius:10px;border:0;background:linear-gradient(180deg,var(--accent),#e85a2a);color:white;cursor:pointer}
  .cart .empty{padding:36px;text-align:center;color:var(--muted)}
  .cart-list{max-height:60vh;overflow:auto;padding-right:6px}
  .cart-row{display:flex;gap:10px;align-items:center;padding:8px 6px;border-bottom:1px solid rgba(0,0,0,0.04)}
  .cart-row img{width:56px;height:56px;border-radius:8px;object-fit:cover;flex-shrink:0}
  .cart-info{flex:1}
  .qty{display:inline-flex;align-items:center;gap:6px;border-radius:8px;padding:4px;background:rgba(0,0,0,0.03)}
  .qty button{border:0;background:transparent;padding:4px 8px;cursor:pointer}
  .total-row{display:flex;justify-content:space-between;align-items:center;padding:12px 0;font-weight:700}
  footer.cart-actions{display:flex;flex-direction:column;gap:8px}
  .snack{position:fixed;left:50%;transform:translateX(-50%);bottom:18px;background:#111827;color:#fff;padding:10px 16px;border-radius:8px;opacity:0;pointer-events:none;transition:all .25s}
  .snack.show{opacity:1;transform:translate(-50%,-8px);pointer-events:auto}
  /* Responsive */
  @media (max-width:900px){
    main{flex-direction:column;padding:12px}
    .cart{width:100%}
  }
  /* small polish */
  .top-row{display:flex;gap:10px;align-items:center}
  .cart-badge{background:#ef4444;color:#fff;padding:4px 8px;border-radius:999px;font-weight:700;font-size:13px}
  .theme-toggle{background:transparent;border:1px solid rgba(0,0,0,0.06);padding:6px;border-radius:8px;cursor:pointer}
  .confirm-modal{position:fixed;inset:0;background:rgba(0,0,0,0.45);display:flex;align-items:center;justify-content:center;z-index:50;opacity:0;pointer-events:none;transition:.15s}
  .confirm-modal.show{opacity:1;pointer-events:auto}
  .confirm-box{width:96%;max-width:420px;background:var(--card);padding:18px;border-radius:12px;box-shadow:0 10px 40px rgba(2,6,23,0.6)}
</style>
</head>
<body>
<header>
  <div class="brand">
    <div class="logo">Dair</div>
    <div>
      <h1>‡∏Å‡∏±‡∏ö‡∏Ç‡πâ‡∏≤‡∏ß‡∏ö‡∏≤‡∏á‡∏ß‡∏±‡∏ô (‡∏ö‡∏≤‡∏á‡∏ß‡∏±‡∏ô‡∏Å‡πá‡πÄ‡∏õ‡∏¥‡∏î ‡∏ö‡∏≤‡∏á‡∏ß‡∏±‡∏ô‡∏Å‡πá‡∏õ‡∏¥‡∏î)</h1>
      <div style="font-size:12px;color:var(--muted)">‡πÄ‡∏°‡∏ô‡∏π‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á ‚Ä¢ ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏ï‡∏∞‡∏Å‡∏£‡πâ‡∏≤‡πÉ‡∏ô‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á</div>
    </div>
  </div>
  <div class="controls">
    <div class="top-row" style="align-items:center">
      <div class="cart-badge" id="cart-count">0</div>
    </div>
    <button class="theme-toggle" id="toggleTheme" title="‡∏™‡∏•‡∏±‡∏ö‡∏ò‡∏µ‡∏°">üåó</button>
  </div>
</header>

<main>
  <section class="menu" id="menuContainer">
    <!-- ‡πÄ‡∏°‡∏ô‡∏π‡∏à‡∏∞‡∏ñ‡∏π‡∏Å‡πÄ‡∏£‡∏ô‡πÄ‡∏î‡∏≠‡∏£‡πå‡∏î‡πâ‡∏ß‡∏¢ JS -->
  </section>

  <aside class="cart card" id="cartContainer">
    <h3 style="margin-top:0">‡∏ï‡∏∞‡∏Å‡∏£‡πâ‡∏≤‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤</h3>
    <div id="cartContent">
      <div class="empty">‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡πÉ‡∏ô‡∏ï‡∏∞‡∏Å‡∏£‡πâ‡∏≤</div>
    </div>
    <div style="margin-top:12px" id="cartSummary" hidden>
      <div class="total-row">
        <div>‡∏£‡∏ß‡∏°</div>
        <div id="cartTotal">0 ‡∏ø</div>
      </div>
      <div class="cart-actions">
        <button class="btn" id="checkoutBtn">‡∏™‡∏±‡πà‡∏á‡∏≠‡∏≤‡∏´‡∏≤‡∏£</button>
        <button class="ghost" id="clearBtn">‡∏•‡πâ‡∏≤‡∏á‡∏ï‡∏∞‡∏Å‡∏£‡πâ‡∏≤</button>
      </div>
    </div>
  </aside>
</main>

<div id="snack" class="snack"></div>

<!-- ‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏™‡∏±‡πà‡∏á -->
<div id="confirmModal" class="confirm-modal" aria-hidden="true">
  <div class="confirm-box">
    <h3 id="confirmTitle">‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡∏™‡∏±‡πà‡∏á</h3>
    <p id="confirmText">‡∏£‡∏ß‡∏°‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î 0 ‡∏ø</p>
    <div style="display:flex;gap:8px;justify-content:flex-end;margin-top:12px">
      <button class="ghost" id="cancelConfirm">‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å</button>
      <button class="btn" id="okConfirm">‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô</button>
    </div>
  </div>
</div>

<script>
/* ======= Sample menu data (‡∏†‡∏≤‡∏©‡∏≤‡πÑ‡∏ó‡∏¢) ======= */
const MENU = [
  { id: 'm1', name: '‡∏ô‡πâ‡∏≥‡∏û‡∏£‡∏¥‡∏Å‡∏≠‡πà‡∏≠‡∏á', desc: '‡πÄ‡∏õ‡πá‡∏ô‡∏ô‡πâ‡∏≥‡∏û‡∏£‡∏¥‡∏Å‡∏¢‡∏≠‡∏î‡∏ô‡∏¥‡∏¢‡∏° ‡∏ó‡∏≤‡∏ô‡∏Ñ‡∏π‡πà‡∏Å‡∏±‡∏ö‡∏Ç‡πâ‡∏≤‡∏ß‡πÄ‡∏´‡∏ô‡∏µ‡∏¢‡∏ß ‡∏ú‡∏±‡∏Å‡∏™‡∏î ‡πÅ‡∏Ñ‡∏ö‡∏´‡∏°‡∏π', price: 65, img: 'https://www.bangkokbusline.co.th/public/uploads/files/image/%E0%B8%AD%E0%B8%B2%E0%B8%AB%E0%B8%B2%E0%B8%A3%E0%B9%80%E0%B8%AB%E0%B8%99%E0%B8%B7%E0%B8%AD%E0%B8%A1%E0%B8%B5%E0%B8%AD%E0%B8%B0%E0%B9%84%E0%B8%A3%E0%B8%9A%E0%B9%89%E0%B8%B2%E0%B8%87_%20%E0%B9%81%E0%B8%99%E0%B8%B0%E0%B8%99%E0%B8%B3%2010%20%E0%B9%80%E0%B8%A1%E0%B8%99%E0%B8%B9%E0%B8%AD%E0%B8%B2%E0%B8%AB%E0%B8%B2%E0%B8%A3%E0%B9%80%E0%B8%AB%E0%B8%99%E0%B8%B7%E0%B8%AD%20%E0%B8%A5%E0%B8%B3%E0%B9%81%E0%B8%95%E0%B9%8A%E0%B9%86%20%E0%B8%AA%E0%B9%84%E0%B8%95%E0%B8%A5%E0%B9%8C%E0%B8%A5%E0%B9%89%E0%B8%B2%E0%B8%99%E0%B8%99%E0%B8%B2-02.jpg' },
  { id: 'm2', name: '‡∏ô‡πâ‡∏≥‡∏û‡∏£‡∏¥‡∏Å‡∏´‡∏ô‡∏∏‡πà‡∏°', desc: '‡∏ï‡∏±‡∏ß‡∏ô‡πâ‡∏≥‡∏û‡∏£‡∏¥‡∏Å‡∏°‡∏µ‡∏™‡∏µ‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ß ‡∏ó‡∏≥‡∏à‡∏≤‡∏Å ‚Äú‡∏û‡∏£‡∏¥‡∏Å‡∏´‡∏ô‡∏∏‡πà‡∏°‚Äù ‡∏û‡∏£‡∏¥‡∏Å‡∏™‡∏î‡∏™‡∏µ‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ß', price: 70, img: 'https://www.bangkokbusline.co.th/public/uploads/files/image/%E0%B8%AD%E0%B8%B2%E0%B8%AB%E0%B8%B2%E0%B8%A3%E0%B9%80%E0%B8%AB%E0%B8%99%E0%B8%B7%E0%B8%AD%E0%B8%A1%E0%B8%B5%E0%B8%AD%E0%B8%B0%E0%B9%84%E0%B8%A3%E0%B8%9A%E0%B9%89%E0%B8%B2%E0%B8%87_%20%E0%B9%81%E0%B8%99%E0%B8%B0%E0%B8%99%E0%B8%B3%2010%20%E0%B9%80%E0%B8%A1%E0%B8%99%E0%B8%B9%E0%B8%AD%E0%B8%B2%E0%B8%AB%E0%B8%B2%E0%B8%A3%E0%B9%80%E0%B8%AB%E0%B8%99%E0%B8%B7%E0%B8%AD%20%E0%B8%A5%E0%B8%B3%E0%B9%81%E0%B8%95%E0%B9%8A%E0%B9%86%20%E0%B8%AA%E0%B9%84%E0%B8%95%E0%B8%A5%E0%B9%8C%E0%B8%A5%E0%B9%89%E0%B8%B2%E0%B8%99%E0%B8%99%E0%B8%B2-04.jpg' },
  { id: 'm3', name: '‡∏ô‡πâ‡∏≥‡∏û‡∏£‡∏¥‡∏Å‡∏ô‡πâ‡∏≥‡∏õ‡∏π', desc: '‡∏ô‡πâ‡∏≥‡∏û‡∏£‡∏¥‡∏Å‡∏ô‡πâ‡∏≥‡∏õ‡∏π ‡∏´‡∏ô‡πâ‡∏≤‡∏ï‡∏≤‡∏î‡∏≥‡πÜ ‡πÅ‡∏ï‡πà‡∏•‡∏≥‡πÅ‡∏ï‡πâ‡πÜ', price: 120, img: 'https://i.ytimg.com/vi/ZUOCFOn_7FU/hq720.jpg?sqp=-oaymwEhCK4FEIIDSFryq4qpAxMIARUAAAAAGAElAADIQj0AgKJD&rs=AOn4CLAs1jIiHcEXoK1M1GuJ516UFLI5RQ' },
  { id: 'm4', name: '‡∏™‡πâ‡∏≤‡∏à‡∏¥‡πâ‡∏ô', desc: '‡πÉ‡∏ä‡πâ‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏õ‡∏£‡∏∏‡∏á ‡πÄ‡∏õ‡πá‡∏ô‡∏û‡∏£‡∏¥‡∏Å‡∏•‡∏≤‡∏ö ‡πÄ‡∏ä‡πà‡∏ô‡πÄ‡∏î‡∏µ‡∏¢‡∏ß‡∏Å‡∏±‡∏ö‡∏•‡∏≤‡∏ö', price: 50, img: 'https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEi8EVrThU_XVlKLfQANnvZTOrGsjfqM8mMKSQ4BymBa9HFlaeHGO7B9Oe-yWZO1tXbcd6SZ1fVBcsUiaGEGPnkH3MADRVNlD7pupaBpnPeOsSR6KPj5KQyLHU1tC9exXqZAvgjBgrALLW8/s1600/1408944591-c4c234359b-o.jpg' },
  { id: 'm5', name: '‡∏Ñ‡∏±‡πà‡∏ß‡πÑ‡∏Å‡πà', desc: '‡∏£‡∏™‡∏ä‡∏≤‡∏ï‡∏¥‡∏à‡∏±‡∏î‡∏à‡πâ‡∏≤‡∏ô ‡∏´‡∏≠‡∏°‡∏Å‡∏•‡∏¥‡πà‡∏ô‡∏™‡∏°‡∏∏‡∏ô‡πÑ‡∏û‡∏£', price: 70, img: 'https://img.wongnai.com/p/400x0/2021/04/10/9eec53f88313405697af69cc40a11570.jpg' },
  // { id: 'm6', name: '‡∏ï‡πâ‡∏°‡∏¢‡∏≥‡∏Å‡∏∏‡πâ‡∏á', desc: '‡∏ï‡πâ‡∏°‡∏¢‡∏≥‡∏Å‡∏∏‡πâ‡∏á‡∏ô‡πâ‡∏≥‡∏Ç‡πâ‡∏ô ‡∏£‡∏™‡∏à‡∏±‡∏î‡∏à‡πâ‡∏≤‡∏ô', price: 80, img: 'https://www.thaispecialfood.com/wp-content/uploads/2018/05/Tom-Yum-Goong-Thai-Spicy-Shrimp-Soup.jpg' },
];

/* ======= Cart utils (‡πÄ‡∏Å‡πá‡∏ö‡πÉ‡∏ô localStorage) ======= */
const CART_KEY = 'demo_food_cart_v1';
let cart = loadCart(); // { id: qty, ... }

function loadCart(){
  try{
    const raw = localStorage.getItem(CART_KEY);
    return raw ? JSON.parse(raw) : {};
  }catch(e){ return {}; }
}
function saveCart(){
  localStorage.setItem(CART_KEY, JSON.stringify(cart));
}
function cartCount(){
  return Object.values(cart).reduce((s,n)=>s+n,0);
}
function cartItemsDetailed(){
  return Object.entries(cart).map(([id,qty])=>{
    const item = MENU.find(m=>m.id===id);
    return { ...item, qty: qty || 0 };
  }).filter(Boolean);
}
function cartTotal(){
  return cartItemsDetailed().reduce((sum,it)=>sum + (it.price * it.qty), 0);
}

/* ======= Render ======= */
const menuContainer = document.getElementById('menuContainer');
const cartContent = document.getElementById('cartContent');
const cartSummary = document.getElementById('cartSummary');
const cartTotalEl = document.getElementById('cartTotal');
const cartCountEl = document.getElementById('cart-count');
const snack = document.getElementById('snack');

function renderMenu(){
  menuContainer.innerHTML = '';
  MENU.forEach(m=>{
    const card = document.createElement('div');
    card.className = 'card menu-item';
    card.innerHTML = `
      <img src="${m.img}" alt="${escapeHtml(m.name)}" loading="lazy" onerror="this.style.opacity=.6;this.style.filter='grayscale(40%)'">
      <div class="mi-body">
        <div class="mi-title"><h3>${escapeHtml(m.name)}</h3><div class="price">${m.price} ‡∏ø</div></div>
        <div class="mi-desc">${escapeHtml(m.desc)}</div>
        <div style="display:flex;justify-content:flex-end">
          <button class="add" data-id="${m.id}">‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏•‡∏á‡∏ï‡∏∞‡∏Å‡∏£‡πâ‡∏≤</button>
        </div>
      </div>
    `;
    menuContainer.appendChild(card);
  });
  // attach handlers
  menuContainer.querySelectorAll('.add').forEach(btn=>{
    btn.addEventListener('click', ()=> {
      addToCart(btn.dataset.id);
    });
  });
}

function renderCart(){
  const items = cartItemsDetailed();
  cartCountEl.textContent = cartCount();
  if(items.length===0){
    cartContent.innerHTML = '<div class="empty">‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡πÉ‡∏ô‡∏ï‡∏∞‡∏Å‡∏£‡πâ‡∏≤</div>';
    cartSummary.hidden = true;
    return;
  }
  cartSummary.hidden = false;
  cartTotalEl.textContent = numberFormat(cartTotal()) + ' ‡∏ø';
  cartContent.innerHTML = '';
  const list = document.createElement('div'); list.className = 'cart-list';
  items.forEach(it=>{
    const row = document.createElement('div'); row.className = 'cart-row';
    row.innerHTML = `
      <img src="${it.img}" alt="${escapeHtml(it.name)}" onerror="this.style.opacity=.6">
      <div class="cart-info">
        <div style="display:flex;justify-content:space-between;align-items:center">
          <div style="font-weight:700">${escapeHtml(it.name)}</div>
          <div style="font-weight:700">${numberFormat(it.price)} ‡∏ø</div>
        </div>
        <div style="display:flex;justify-content:space-between;align-items:center;margin-top:8px">
          <div class="qty">
            <button data-op="dec" data-id="${it.id}">‚àí</button>
            <div style="min-width:22px;text-align:center">${it.qty}</div>
            <button data-op="inc" data-id="${it.id}">Ôºã</button>
          </div>
          <button class="ghost" data-op="remove" data-id="${it.id}">‡∏•‡∏ö</button>
        </div>
      </div>
    `;
    list.appendChild(row);
  });
  cartContent.appendChild(list);

  // attach qty handlers
  cartContent.querySelectorAll('button[data-op]').forEach(b=>{
    const id = b.dataset.id;
    const op = b.dataset.op;
    b.addEventListener('click', ()=> {
      if(op==='inc') changeQty(id, 1);
      else if(op==='dec') changeQty(id, -1);
      else if(op==='remove') removeItem(id);
    });
  });
}

/* ======= Actions ======= */
function addToCart(id){
  cart[id] = (cart[id] || 0) + 1;
  saveCart(); renderCart(); showSnack('‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏•‡∏á‡∏ï‡∏∞‡∏Å‡∏£‡πâ‡∏≤‡πÅ‡∏•‡πâ‡∏ß');
}
function changeQty(id, delta){
  if(!cart[id]) return;
  cart[id] = cart[id] + delta;
  if(cart[id] <= 0) delete cart[id];
  saveCart(); renderCart();
}
function removeItem(id){
  delete cart[id]; saveCart(); renderCart();
}
function clearCart(){
  cart = {}; saveCart(); renderCart();
}

/* ======= Checkout flow (modal confirm) ======= */
const confirmModal = document.getElementById('confirmModal');
const confirmText = document.getElementById('confirmText');
document.getElementById('checkoutBtn').addEventListener('click', ()=>{
  const total = cartTotal();
  if(total<=0){ showSnack('‡∏ï‡∏∞‡∏Å‡∏£‡πâ‡∏≤‡∏ß‡πà‡∏≤‡∏á'); return; }
  confirmText.textContent = `‡∏£‡∏ß‡∏°‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î ${numberFormat(total)} ‡∏ø ‚Äî ‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡∏™‡∏±‡πà‡∏á‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà?`;
  confirmModal.classList.add('show'); confirmModal.setAttribute('aria-hidden','false');
});
document.getElementById('cancelConfirm').addEventListener('click', ()=> {
  confirmModal.classList.remove('show'); confirmModal.setAttribute('aria-hidden','true');
});
document.getElementById('okConfirm').addEventListener('click', ()=> {
  // simulate placing order
  confirmModal.classList.remove('show'); confirmModal.setAttribute('aria-hidden','true');
  // simulate server delay
  showSnack('‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏™‡πà‡∏á‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á...'); setTimeout(()=>{
    showSnack('‡∏™‡∏±‡πà‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢! ‡∏Ç‡∏≠‡∏ö‡∏Ñ‡∏∏‡∏ì‡∏ó‡∏µ‡πà‡πÉ‡∏ä‡πâ‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£');
    clearCart();
  }, 800);
});
document.getElementById('clearBtn').addEventListener('click', ()=> {
  if(confirm('‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏•‡πâ‡∏≤‡∏á‡∏ï‡∏∞‡∏Å‡∏£‡πâ‡∏≤‡∏à‡∏£‡∏¥‡∏á‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà?')) clearCart();
});

/* ======= Theme toggle ======= */
const themeToggle = document.getElementById('toggleTheme');
const userTheme = localStorage.getItem('demo_theme');
if(userTheme) document.documentElement.setAttribute('data-theme', userTheme);
updateThemeUI();
themeToggle.addEventListener('click', ()=> {
  const current = document.documentElement.getAttribute('data-theme');
  const next = current === 'dark' ? '' : 'dark';
  if(next) document.documentElement.setAttribute('data-theme', next);
  else document.documentElement.removeAttribute('data-theme');
  localStorage.setItem('demo_theme', next);
  updateThemeUI();
});
function updateThemeUI(){
  const cur = document.documentElement.getAttribute('data-theme');
  themeToggle.textContent = cur === 'dark' ? '‚òÄÔ∏è' : 'üåô';
}

/* ======= Helpers ======= */
function showSnack(text, ms=1800){
  snack.textContent = text; snack.classList.add('show');
  clearTimeout(snack._t); snack._t = setTimeout(()=> snack.classList.remove('show'), ms);
}
function numberFormat(n){ return Math.round(n).toLocaleString('th-TH'); }
function escapeHtml(s){ if(!s) return ''; return s.replace(/[&<>"']/g, c => ({'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":"&#39;"}[c])); }

/* ======= Init ======= */
renderMenu();
renderCart();

/* Optional: expose some functions for console debugging */
// window._cart = cart; window._add = addToCart; window._render = renderCart;
</script>
</body>
</html>
